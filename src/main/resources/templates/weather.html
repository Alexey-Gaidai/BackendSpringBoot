<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Forecast</title>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/css/bootstrap.min.css"
    />
    <style>
      .card {
        margin-bottom: 20px;
        border: 3px solid #000; /* Белая рамка */
        border-radius: 10px; /* Радиус скругления */
      }
    </style>
</head>

<body>
<div class="container">
    <div class="row justify-content-center align-items-center min-vh-100">
        <div class="col-md-6">
            <h1 class="text-center mb-4">Weather Forecast</h1>
            <form id="search-form" class="mb-3">
                <div class="input-group">
                    <input
                            type="text"
                            class="form-control"
                            id="city-input"
                            placeholder="Enter city"
                    />
                    <button type="submit" class="btn btn-primary">Search</button>
                </div>
            </form>
        </div>
    </div>
    <div id="weather-list" class="row justify-content-center"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
      $(document).ready(function () {
        const weatherList = $("#weather-list");
        const searchForm = $("#search-form");
        const cityInput = $("#city-input");

        searchForm.on("submit", function (event) {
          event.preventDefault();
          const city = cityInput.val().trim();
          if (city !== "") {
            getWeather(city);
          }
        });

        function getWeather(city) {
          const url = `/api/weather/${encodeURIComponent(city)}`;
          axios
            .get(url)
            .then(function (response) {
              const weatherData = response.data;
              renderWeather(weatherData);
            })
            .catch(function (error) {
              console.error("Error:", error);
            });
        }

        function renderWeather(weatherData) {
          weatherList.empty();
          weatherData.forEach(function (weather) {
            const card = createWeatherCard(weather);
            weatherList.append(card);
          });
        }

        function createWeatherCard(weather) {
          const card = $("<div>")
            .addClass("card")
            .css("width", "18rem"); // Set card width
          const img = $("<img>")
            .addClass("card-img-top")
            .attr("src", weather.icon)
            .attr("alt", weather.description);
          const cardBody = $("<div>").addClass("card-body").appendTo(card);

          $("<h5>")
            .addClass("card-title")
            .text(weather.city)
            .appendTo(cardBody);
          $("<p>").addClass("card-text").text(weather.description).appendTo(cardBody);

          img.appendTo(card);
          return card;
        }
      });
    </script>
</body>
</html>